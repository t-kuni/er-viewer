# SPEC.md要件チェック結果とタスク一覧

## 実装済み（要件を満たしている） ✅

- [x] RDBからER図をリバースできる（MySQL対応）
- [x] エンティティには「テーブル名」と「カラム名の一覧」が表示される
- [x] カラム名のみを表示する（型情報も併記されているが要件的にはOK）
- [x] カラムの種類に応じてカラム名の左に絵文字を表示（🔑主キーマーク確認）
- [x] 「テーブル名」と「カラム名」の長さに応じてエンティティの幅が調整される
- [x] リレーションが貼られているカラム間が線で繋がれている
- [x] GUI上のキャンバス左上に主要な機能の操作説明を表示する
- [x] 操作説明が折りたたみ可能
- [x] GUI上の左サイドバーにレイヤー一覧を表示する（基本構造は実装済み）
- [x] 右サイドバーにテーブル詳細エリアが表示される
- [x] dockerコンテナとして提供する（docker-composeで起動確認済み）

## 実装不足または動作未確認 ❌

以下の要件を満たせるように修正してください
可能な限り、バグを再現するテストコードを書いてから実装を修正してください

### 高優先度

- [x] エンティティをクリックすると右サイドバーにDDL相当の情報が表示される
  - 現在：「テーブルをクリックして詳細を表示」のメッセージのみ
  - 必要：DDLのsyntax highlight機能
  - 実装完了：Prism.jsライブラリを追加し、DDLのsyntax highlight機能を実装（2025-07-01）
  - index.htmlにPrism.jsのCDNリンクを追加
  - showSidebar関数でPrism.highlightElementを呼び出すように実装済み
  - テストコード追加済み（user-interaction.test.ts）
  
- [ ] エンティティにホバーすると当該エンティティとリレーションとその先のエンティティがハイライト（強調）される
  - リレーションが貼られているカラムもハイライト
  - 一時的に最前面に来るぐらい強調
  
- [ ] リレーションにホバーするとリレーションとその両端のカラムがハイライト（強調）される
  - 一時的に最前面に来るぐらい強調

### 中優先度

- [ ] ホイールで拡大縮小ができる
- [ ] スペースを押しながらドラッグでスクロールする（ホイール押し込みながらマウス移動でも同様）
- [ ] ER図上のエンティティの配置をGUI上で自由に操作できる
- [ ] GUI上から「ER図のデータ」や「エンティティの配置に関するデータ」を保存できる
- [ ] GUI上で矩形を描画できる
  - 線の色、塗りつぶしの色、サイズ、位置をインタラクティブに編集
  - 「エンティティの配置に関するデータ」として保存される
- [ ] GUI上でテキストを描画できる
  - 位置、色、サイズをインタラクティブに編集
  - 「エンティティの配置に関するデータ」として保存される
- [ ] 左サイドバーのレイヤー一覧の各要素をドラッグ＆ドロップで順番を入れ替えられる
- [ ] 左サイドバーは開閉できる（デフォルトは表示されている）
- [ ] 左サイドバーのフチをドラッグ＆ドロップするとサイズを変更できる
- [ ] 同じDBから追加でリバースできる（増分リバースと呼ぶ）
  - 差分を反映する
  - 「エンティティの配置に関するデータ」は維持される

### 低優先度

- [ ] 最初の作成時にエンティティの配置がある程度クラスタリングされる
  - 現在：単純に左上からの配置
- [ ] 上下左右方向のみのPolylineで接続する（斜めの直線はNG）
  - 現在の実装での線の描画方式を確認が必要
- [ ] より多くのカラム種別に対応した絵文字表示
  - 現在：🔑（主キー）のみ確認

## 設定・環境系（要確認）

- [ ] 接続先のDBの情報は環境変数で設定する
- [ ] 「ER図のデータ」や「エンティティの配置に関するデータ」の保存先はdocker-composeのvolume機能で切り替えられるようにする

## 注意事項

- カラム一覧に型情報が表示されているが、要件では「型などの情報は右サイドバーのDDLで確認する」とあるため、厳密にはカラム名のみの表示に修正が必要かもしれない
- エンティティクリック機能が動作しないため、DDL表示とsyntax highlight機能の実装状況が未確認
- 操作性の問題：エンティティが画面外に配置されることが多く、ユーザビリティに課題がある